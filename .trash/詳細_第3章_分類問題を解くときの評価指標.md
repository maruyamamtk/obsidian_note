# 詳細_第3章_分類問題を解くときの評価指標

## 概要

第3章では、**分類問題（特に二値分類）**を対象とした評価指標について包括的に解説しています。混同行列をベースとした基本的な指標から、より高度な評価手法まで幅広くカバーされています。

## 混同行列ベースの基本指標

### Precision（精度）
予測が正例だったもののうち、実際に正例だった割合を示します。**誤った正例予測がコストに直結する場合**（例：広告配信）に重視すべき指標です。

### Recall（再現率）
実際の正例のうち、正しく予測できた割合を示します。**False Negativeを避けたい場合**（例：不正検知、医療診断）に重視すべき指標です。

### F1-score
PrecisionとRecallの調和平均で、両者のトレードオフの中庸として位置付けられます。バランスの取れた評価を行いたい場合に有効です。

### Accuracy（正解率）
全予測のうち正しかった割合を示しますが、クラス不均衡がある場合は誤解を招きやすい指標となります。

## 高度な評価指標

### ROC-AUC（Receiver Operating Characteristic - Area Under Curve）
様々なしきい値での性能を統合的に評価する指標です。クラスが比較的均衡している場合に適していますが、**極端なクラス不均衡下では性能の違いを捉えにくい**という限界があります。

### PR-AUC（Precision-Recall - Area Under Curve）
Precision-Recall曲線の下側面積を表し、**クラス不均衡下でより性能の違いを反映しやすい**特性があります。少数クラスの検出性能を重視する場合に有効です。

### G-Mean（Geometric Mean）
各クラスの感度（Sensitivity）の幾何平均で、クラス不均衡問題に対してよりバランスの取れた評価を提供します。

### MCC（Matthews Correlation Coefficient）
混同行列の全要素を考慮した相関係数で、クラス不均衡にも比較的ロバストな指標として知られています。

## 重要な観点：何を重視するか

指標の選択は「何を重視するか」によって決まります：

- **不正検知・医療診断**: False Negativeのリスクが高いため、**Recall重視**
- **広告配信**: 誤った配信がコストに直結するため、**Precision重視**
- **バランス重視**: F1-scoreやMCCで総合的な性能を評価

## しきい値設定の重要性

分類問題では、確率出力をバイナリ判定に変換する際の**しきい値設定**が性能に大きく影響します。この設定は技術的な最適化だけでなく、**ビジネスサイドとの協議による意思決定基準の可視化**が必要不可欠です。

## クラス不均衡への対応

極端なクラス不均衡のケースでは：

- **ROC-AUCよりもPR-AUCを優先**して使用
- **クラス別の詳細な指標確認**を行う
- **混同行列の可視化**により誤分類パターンを把握

## 実務での考慮事項

現場では「1つの評価指標に頼らない」ことが重要です。複数の指標を組み合わせ、どのクラスの誤分類がビジネスにとって致命的かを把握することが実務上の必須対応とされています。

## 関連リンク

- [[詳細_第2章_回帰問題を解くときの評価指標]] - 前章の詳細
- [[章ごとのまとめ]] - メイン要約に戻る
- [[詳細_第4章_実務で使うための評価指標]] - 次章の詳細
